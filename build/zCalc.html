<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style/main.css"/>
  <title>zCalc</title>
  <style>
    body,html{padding:0;margin:0}.zcalc_,body{background-color:#fff}.zcalc_,.zcalc_ ._input{border:1px solid #d0d0d0;color:#333}html{font-family:tahoma,arial,verdana,sans-serif,"Lucida Sans";font-size:10px}body{font-size:1.6em}.zcalc_{margin:5px auto;position:relative;width:20pc}.zcalc_ ._z-body{padding:15px 15px 0}.zcalc_ ._z-panel{margin:10px 0}.zcalc_ ._z-panel.-bottom{position:absolute;left:10px;right:10px;bottom:0}.zcalc_ ._z-panel.-mid{line-height:2em}.zcalc_ ._input{margin:0;padding:5px 2%;text-align:right;-webkit-transition:border .2s ease-out;transition:border .2s ease-out;width:96%}.zcalc_ ._btn,.zcalc_ ._result{padding:10px 0;width:100%;font-weight:700}.zcalc_ ._input:focus{border:1px solid #a0a0a0;outline:0}.zcalc_ ._btn{background-color:#3a9bdc;border:1px solid #2980b9;border-radius:4px}.zcalc_ ._btn:active{background-color:#2980b9}.zcalc_ ._btn:focus{outline:0}.zcalc_ ._result{overflow-x:auto;font-size:2em;text-align:right;white-space:nowrap}.zcalc_ ._small{font-size:.7em;margin-left:10px}.zcalc_ ._big{display:inline-block;margin-left:10px}.zcalc_ ._error{color:#f06354}.zcalc_ ._settings{display:none;position:absolute;padding:0 10px;top:50px;left:0;right:0;bottom:0;background-color:#34495e}.zcalc_ ._settings select{color:#333}.zcalc_ ._settings.-shown{display:block}.zcalc_ ._z-bottom{padding:5px 15px;text-align:center;font-size:.7em}.zcalc_ ._z-bottom span{display:inline-block;font-size:1em;font-weight:700;padding-right:5px}.zcalc_ ._z-bottom a{color:#3a9bdc}.zcalc_ ._z-bottom a:hover{color:#2980b9}.zcalc_ ._z-bottom a:visited{color:#3a9bdc}
  </style>
</head>
<body>
  <div class="zcalc_">
    <div class="_z-center">
      <div class="_z-body">
        <div class="_z-panel">
          <input type="text" id="user-input" class="_input"/>
        </div>
        <div class="_z-panel">
          <div id="result" class="_result">0</div>
        </div>
      </div>
    </div>
    <div class="_z-bottom"><span>zCalc</span><a href="https://github.com/deLiero/zCalc">deLiero</a></div>
  </div>
  <script>function ZCalc(){function n(n){return/^[\d]+$/.test(n)}function e(n){return/^0*$/.test(n)?"0":n.replace(/^0*/,"")}this.calculate=function(t){if(0==(t+"").length)return[0];if(!n(t))throw new Error("ошибка ввода");t=e(t);var l=0,s=[];for(s.push(t);t>9;){t+="";for(var r=0;r<t.length;r++)l+=parseInt(t.charAt(r));t=l,s.push(t),l=0}return s}}window.onload=function(){function n(n){resultElem.innerHTML='<span class="_error">'+n.message+"</span>"}function e(n){if("undefined"!=typeof n&&0!=n.length){var e=n.length;return 1==e?void(resultElem.innerHTML=n[0]):2==e?void(resultElem.innerHTML=n[e-1]):3==e?void(resultElem.innerHTML='<span class="_small">'+n[e-2]+'</span><span class="_big">'+n[e-1]+"</span>"):void(resultElem.innerHTML='<span class="_small">'+n[e-3]+'</span><span class="_small">'+n[e-2]+'</span><span class="_big">'+n[e-1]+"</span>")}}function t(){try{var t=calc.calculate(l.value);e(t)}catch(s){n(s)}finally{l.focus()}}var l=document.getElementById("user-input");document.getElementById("shadow-input");resultElem=document.getElementById("result"),calc=new ZCalc;var s=13,r=32;window.onblur=function(){console.log("blur"),l.blur()},window.onfocus=function(){l.select()},l.oninput=function(){t()},l.onkeydown=function(n){n.which==s&&(n.preventDefault(),t()),n.which==r&&n.preventDefault()},l.focus()};</script>
</body>
</html>